# bot/config/pricing.py
"""
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–æ–∫, –ª–∏–º–∏—Ç–æ–≤ –∏ —Ü–µ–Ω.

–õ–ï–ì–ö–û –†–ï–î–ê–ö–¢–ò–†–£–ï–¢–°–Ø –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞.
–í –±—É–¥—É—â–µ–º ‚Äî –≤—ã–Ω–µ—Å—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É.

–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω –∏ –ª–∏–º–∏—Ç–æ–≤:
1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω—É–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞: supervisorctl restart telegram_bot
"""

from typing import Dict, Any, Optional

# =============================================================================
# –¢–ò–ü–´ –ê–ö–ö–ê–£–ù–¢–û–í / –ü–û–î–ü–ò–°–ö–ò
# =============================================================================

ACCOUNT_TYPES: Dict[str, Dict[str, Any]] = {
    "free": {
        "name": "–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π",
        "emoji": "üë§",
        "price_rub": 0,
        "duration_days": None,  # –ë–µ—Å—Å—Ä–æ—á–Ω–æ
        "limits": {
            "max_active_ads": 90,            # –ú–∞–∫—Å. –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
            "ad_duration_days": 1,           # –°—Ä–æ–∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (–¢–ï–°–¢: 1 –¥–µ–Ω—å)
            "max_publications_per_30d": 30,  # –ú–∞–∫—Å. –ø—É–±–ª–∏–∫–∞—Ü–∏–π –∑–∞ 30 –¥–Ω–µ–π
            "max_regions_per_ad": 1,         # –†–µ–≥–∏–æ–Ω–æ–≤ –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
            "max_links_per_ad": 1,           # –ë–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
            "max_photos_per_ad": 5,          # –§–æ—Ç–æ –≤ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏
            "video_allowed": False,          # –í–∏–¥–µ–æ –≤ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏
            "priority_moderation": False,    # –ë—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è
            "statistics": "basic",           # basic / extended
            "support_priority": "normal",    # normal / high
            "boost_now_included": 0,         # –ë–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –ø–æ–¥–Ω—è—Ç–∏–π "—Å–µ–π—á–∞—Å"
            "boost_4x_6d_included": 0,       # –ë–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —É—Å–ª—É–≥ "4 —Ä–∞–∑–∞ –∫–∞–∂–¥—ã–µ 6 –¥–Ω–µ–π"
            "boost_2x_10d_included": 0,      # –ë–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —É—Å–ª—É–≥ "2 —Ä–∞–∑–∞ –∫–∞–∂–¥—ã–µ 10 –¥–Ω–µ–π"
        },
        "extra_prices": {
            "extra_ad_price_rub": 10,        # –¶–µ–Ω–∞ –∑–∞ –¥–æ–ø. –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —Å–≤–µ—Ä—Ö –ª–∏–º–∏—Ç–∞
            "extra_publication_price_rub": 10,  # –¶–µ–Ω–∞ –∑–∞ –¥–æ–ø. –ø—É–±–ª–∏–∫–∞—Ü–∏—é —Å–≤–µ—Ä—Ö –ª–∏–º–∏—Ç–∞
        },
        "features": [],
        "description": "–ë–∞–∑–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π",
    },

    "pro": {
        "name": "PRO",
        "emoji": "‚≠ê",
        "price_rub": 199,
        "duration_days": 30,
        "limits": {
            "max_active_ads": 150,
            "ad_duration_days": 30,
            "max_publications_per_30d": 50,
            "max_regions_per_ad": 3,
            "max_links_per_ad": 2,
            "max_photos_per_ad": 10,
            "video_allowed": True,
            "priority_moderation": False,
            "statistics": "extended",
            "support_priority": "normal",
            "boost_now_included": 1,
            "boost_4x_6d_included": 0,
            "boost_2x_10d_included": 0,
        },
        "extra_prices": {
            "extra_ad_price_rub": 9,
            "extra_publication_price_rub": 9,
        },
        "features": ["badge_pro"],
        "description": "–î–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–¥–∞–≤—Ü–æ–≤",
    },

    # -------------------------------------------------------------------------
    # –ü–ê–ö–ï–¢–ù–´–ï –¢–ê–†–ò–§–´
    # -------------------------------------------------------------------------
    "business_subscription": {
        "name": "–ë–∏–∑–Ω–µ—Å (–ø–æ–¥–ø–∏—Å–∫–∞)",
        "emoji": "üíº",
        "price_rub": 999,
        "duration_days": 30,
        "is_subscription": True,  # –ê–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ
        "limits": {
            "max_active_ads": 300,
            "ad_duration_days": 30,
            "max_publications_per_30d": 90,
            "max_regions_per_ad": 5,
            "max_links_per_ad": 4,
            "max_photos_per_ad": 10,
            "video_allowed": True,
            "priority_moderation": True,
            "statistics": "extended",
            "support_priority": "high",
            "boost_now_included": 3,         # 3 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –ø–æ–¥–Ω—è—Ç–∏—è "—Å–µ–π—á–∞—Å"
            "boost_4x_6d_included": 1,       # 1 –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è —É—Å–ª—É–≥–∞ "4 —Ä–∞–∑–∞ –∫–∞–∂–¥—ã–µ 6 –¥–Ω–µ–π"
            "boost_2x_10d_included": 1,      # 1 –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è —É—Å–ª—É–≥–∞ "2 —Ä–∞–∑–∞ –∫–∞–∂–¥—ã–µ 10 –¥–Ω–µ–π"
        },
        "extra_prices": {
            "extra_ad_price_rub": 7,
            "extra_publication_price_rub": 7,
        },
        "features": ["badge_business", "priority_support", "analytics_pro"],
        "description": "–ü–æ–¥–ø–∏—Å–∫–∞ –¥–ª—è –±–∏–∑–Ω–µ—Å–∞ —Å –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ–º",
    },

    "business_pack": {
        "name": "–ë–∏–∑–Ω–µ—Å (–ø–∞–∫–µ—Ç)",
        "emoji": "üì¶",
        "price_rub": 999,
        "duration_days": 30,
        "is_subscription": False,  # –†–∞–∑–æ–≤–∞—è –ø–æ–∫—É–ø–∫–∞
        "limits": {
            "max_active_ads": 300,
            "ad_duration_days": 30,
            "max_publications_per_30d": 90,
            "max_regions_per_ad": 5,
            "max_links_per_ad": 4,
            "max_photos_per_ad": 10,
            "video_allowed": True,
            "priority_moderation": True,
            "statistics": "extended",
            "support_priority": "high",
            "boost_now_included": 3,
            "boost_4x_6d_included": 1,
            "boost_2x_10d_included": 1,
        },
        "extra_prices": {
            "extra_ad_price_rub": 7,
            "extra_publication_price_rub": 7,
        },
        "features": ["badge_business", "priority_support", "analytics_pro"],
        "description": "–ü–∞–∫–µ—Ç –¥–ª—è –±–∏–∑–Ω–µ—Å–∞ –Ω–∞ 30 –¥–Ω–µ–π",
    },
}

# =============================================================================
# –ü–õ–ê–¢–ù–´–ï –£–°–õ–£–ì–ò
# =============================================================================

PAID_SERVICES: Dict[str, Dict[str, Any]] = {
    # -------------------------------------------------------------------------
    # –ü—Ä–æ–¥–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
    # -------------------------------------------------------------------------
    "ad_extend_7d": {
        "name": "–ü—Ä–æ–¥–ª–∏—Ç—å –Ω–∞ 7 –¥–Ω–µ–π",
        "description": "–ü—Ä–æ–¥–ª–µ–Ω–∏–µ —Å—Ä–æ–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è",
        "category": "ad_duration",
        "price_rub": 19,
        "duration_hours": 7 * 24,
        "is_active": True,
    },
    "ad_extend_14d": {
        "name": "–ü—Ä–æ–¥–ª–∏—Ç—å –Ω–∞ 14 –¥–Ω–µ–π",
        "description": "–ü—Ä–æ–¥–ª–µ–Ω–∏–µ —Å—Ä–æ–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è",
        "category": "ad_duration",
        "price_rub": 29,
        "duration_hours": 14 * 24,
        "is_active": True,
    },
    "ad_extend_30d": {
        "name": "–ü—Ä–æ–¥–ª–∏—Ç—å –Ω–∞ 30 –¥–Ω–µ–π",
        "description": "–ü—Ä–æ–¥–ª–µ–Ω–∏–µ —Å—Ä–æ–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è",
        "category": "ad_duration",
        "price_rub": 49,
        "duration_hours": 30 * 24,
        "is_active": True,
    },

    # -------------------------------------------------------------------------
    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
    # -------------------------------------------------------------------------
    "ad_multiregion": {
        "name": "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–≥–∏–æ–Ω",
        "description": "–ü—É–±–ª–∏–∫–∞—Ü–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–º —Ä–µ–≥–∏–æ–Ω–µ",
        "category": "ad_feature",
        "price_rub": 19,
        "per_item": True,  # –¶–µ–Ω–∞ –∑–∞ –∫–∞–∂–¥—ã–π –¥–æ–ø. —Ä–µ–≥–∏–æ–Ω
        "is_active": True,
    },
    "ad_extra_link": {
        "name": "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞",
        "description": "–î–æ–±–∞–≤–∏—Ç—å –µ—â—ë –æ–¥–Ω—É —Å—Å—ã–ª–∫—É –∫ –æ–±—ä—è–≤–ª–µ–Ω–∏—é",
        "category": "ad_feature",
        "price_rub": 9,
        "per_item": True,
        "is_active": True,
    },
    "ad_video": {
        "name": "–í–∏–¥–µ–æ –≤ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏",
        "description": "–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ –∫ –æ–±—ä—è–≤–ª–µ–Ω–∏—é",
        "category": "ad_feature",
        "price_rub": 29,
        "is_active": True,
    },

    # -------------------------------------------------------------------------
    # –ü–æ–¥–Ω—è—Ç–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
    # -------------------------------------------------------------------------
    "boost_now": {
        "name": "–ü–æ–¥–Ω—è—Ç—å —Å–µ–π—á–∞—Å",
        "description": "–ü–æ–¥–Ω—è—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≤ –Ω–∞—á–∞–ª–æ –ª–µ–Ω—Ç—ã –∫–∞–Ω–∞–ª–∞ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å",
        "category": "promotion",
        "price_rub": 100,
        "is_active": True,
    },
    "boost_4x_6d": {
        "name": "–ü–æ–¥–Ω–∏–º–∞—Ç—å 4 —Ä–∞–∑–∞ (–∫–∞–∂–¥—ã–µ 6 –¥–Ω–µ–π)",
        "description": "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥–Ω—è—Ç–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 6 –¥–Ω–µ–π –≤ —Ç–µ—á–µ–Ω–∏–µ 30 –¥–Ω–µ–π",
        "category": "promotion",
        "price_rub": 300,
        "boost_count": 4,          # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–Ω—è—Ç–∏–π
        "interval_days": 6,        # –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø–æ–¥–Ω—è—Ç–∏—è–º–∏
        "is_active": True,
    },
    "boost_2x_10d": {
        "name": "–ü–æ–¥–Ω–∏–º–∞—Ç—å 2 —Ä–∞–∑–∞ (–∫–∞–∂–¥—ã–µ 10 –¥–Ω–µ–π)",
        "description": "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥–Ω—è—Ç–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 10 –¥–Ω–µ–π –≤ —Ç–µ—á–µ–Ω–∏–µ 30 –¥–Ω–µ–π",
        "category": "promotion",
        "price_rub": 150,
        "boost_count": 2,          # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–Ω—è—Ç–∏–π
        "interval_days": 10,       # –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø–æ–¥–Ω—è—Ç–∏—è–º–∏
        "is_active": True,
    },
    "pin_channel_1h": {
        "name": "–ó–∞–∫—Ä–µ–ø –≤ –∫–∞–Ω–∞–ª–µ 1 —á–∞—Å",
        "description": "–ó–∞–∫—Ä–µ–ø–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª–µ –Ω–∞ 1 —á–∞—Å",
        "category": "promotion",
        "price_rub": 49,
        "duration_hours": 1,
        "is_active": True,
    },
    "pin_channel_3h": {
        "name": "–ó–∞–∫—Ä–µ–ø –≤ –∫–∞–Ω–∞–ª–µ 3 —á–∞—Å–∞",
        "description": "–ó–∞–∫—Ä–µ–ø–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª–µ –Ω–∞ 3 —á–∞—Å–∞",
        "category": "promotion",
        "price_rub": 99,
        "duration_hours": 3,
        "is_active": True,
    },
    "pin_channel_24h": {
        "name": "–ó–∞–∫—Ä–µ–ø –≤ –∫–∞–Ω–∞–ª–µ 24 —á–∞—Å–∞",
        "description": "–ó–∞–∫—Ä–µ–ø–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª–µ –Ω–∞ 24 —á–∞—Å–∞",
        "category": "promotion",
        "price_rub": 199,
        "duration_hours": 24,
        "is_active": True,
    },
    "story_publish": {
        "name": "–ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Stories",
        "description": "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≤ Stories –∫–∞–Ω–∞–ª–∞",
        "category": "promotion",
        "price_rub": 79,
        "duration_hours": 24,
        "is_active": True,
    },
    "badge_urgent": {
        "name": "–ë–µ–π–¥–∂ ¬´–°—Ä–æ—á–Ω–æ¬ª",
        "description": "–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∫—É —Å—Ä–æ—á–Ω–æ—Å—Ç–∏ –∫ –æ–±—ä—è–≤–ª–µ–Ω–∏—é",
        "category": "promotion",
        "price_rub": 29,
        "duration_hours": 7 * 24,
        "is_active": True,
    },
    "btn_call": {
        "name": "–ö–Ω–æ–ø–∫–∞ ¬´–ü–æ–∑–≤–æ–Ω–∏—Ç—å¬ª",
        "description": "–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –±—ã—Å—Ç—Ä–æ–≥–æ –∑–≤–æ–Ω–∫–∞",
        "category": "promotion",
        "price_rub": 19,
        "is_active": True,
    },

    # -------------------------------------------------------------------------
    # –†–µ–∫–ª–∞–º–∞
    # -------------------------------------------------------------------------
    "banner_between_ads": {
        "name": "–ë–∞–Ω–Ω–µ—Ä –º–µ–∂–¥—É –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏",
        "description": "–†–µ–∫–ª–∞–º–Ω—ã–π –±–∞–Ω–Ω–µ—Ä –º–µ–∂–¥—É –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏ –≤ –∫–∞–Ω–∞–ª–µ",
        "category": "advertising",
        "price_rub": 199,
        "duration_hours": 24,
        "is_active": True,
    },

    # -------------------------------------------------------------------------
    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
    # -------------------------------------------------------------------------
    "ads_pack_10": {
        "name": "+10 –æ–±—ä—è–≤–ª–µ–Ω–∏–π",
        "description": "–£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–∞ 10",
        "category": "account",
        "price_rub": 49,
        "ads_count": 10,
        "duration_hours": 30 * 24,
        "is_active": True,
    },
    "ads_pack_50": {
        "name": "+50 –æ–±—ä—è–≤–ª–µ–Ω–∏–π",
        "description": "–£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–∞ 50",
        "category": "account",
        "price_rub": 199,
        "ads_count": 50,
        "duration_hours": 30 * 24,
        "is_active": True,
    },
}

# =============================================================================
# –ö–ê–¢–ï–ì–û–†–ò–ò –£–°–õ–£–ì (–¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –º–µ–Ω—é)
# =============================================================================

SERVICE_CATEGORIES = {
    "ad_duration": {
        "name": "üìÖ –ü—Ä–æ–¥–ª–µ–Ω–∏–µ",
        "description": "–ü—Ä–æ–¥–ª–∏—Ç—å —Å—Ä–æ–∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏",
        "order": 1,
    },
    "ad_feature": {
        "name": "‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏",
        "description": "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è",
        "order": 2,
    },
    "promotion": {
        "name": "üöÄ –ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ",
        "description": "–ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è",
        "order": 3,
    },
    "advertising": {
        "name": "üì¢ –†–µ–∫–ª–∞–º–∞",
        "description": "–†–µ–∫–ª–∞–º–Ω—ã–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è",
        "order": 4,
    },
    "account": {
        "name": "üë§ –ê–∫–∫–∞—É–Ω—Ç",
        "description": "–£—Å–ª—É–≥–∏ –¥–ª—è –∞–∫–∫–∞—É–Ω—Ç–∞",
        "order": 5,
    },
}

# =============================================================================
# –ñ–ò–ó–ù–ï–ù–ù–´–ô –¶–ò–ö–õ –û–ë–™–Ø–í–õ–ï–ù–ò–ô
# =============================================================================

AD_LIFECYCLE_CONFIG = {
    # –ü—Ä–æ–¥–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (–∫–Ω–æ–ø–∫–∞ "–ü—Ä–æ–¥–ª–∏—Ç—å" –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏)
    "extend": {
        "is_free": True,                   # –ü—Ä–æ–¥–ª–µ–Ω–∏–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ
        "duration_days": 30,               # –ù–∞ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç—Å—è
    },

    # –ü–µ—Ä–µ–æ–ø—É–±–ª–∏–∫–∞—Ü–∏—è (–∫–æ–≥–¥–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≤ –∞—Ä—Ö–∏–≤–µ, –∫–Ω–æ–ø–∫–∞ "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å")
    "republish": {
        "free_first_time": True,           # –ü–µ—Ä–≤–∞—è –ø–µ—Ä–µ–æ–ø—É–±–ª–∏–∫–∞—Ü–∏—è –±–µ—Å–ø–ª–∞—Ç–Ω–∞
        "price_rub": 29.0,                 # –¶–µ–Ω–∞ –ø–µ—Ä–µ–æ–ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (–µ—Å–ª–∏ –ø–ª–∞—Ç–Ω–æ)
        "price_stars": 15,                 # –¶–µ–Ω–∞ –≤ Stars
        "cooldown_hours": 24,              # –ú–∏–Ω–∏–º—É–º —á–∞—Å–æ–≤ –º–µ–∂–¥—É –ø–µ—Ä–µ–æ–ø—É–±–ª–∏–∫–∞—Ü–∏—è–º–∏
    },

    # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
    # –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å –∫–Ω–æ–ø–∫–∞–º–∏ "–ü—Ä–æ–¥–ª–∏—Ç—å" –∏ "–°–Ω—è—Ç—å"
    "notifications": {
        "enabled": True,
        "warn_days": [2, 1],               # –ó–∞ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π —É–≤–µ–¥–æ–º–ª—è—Ç—å (28 –∏ 29 –¥–µ–Ω—å)
        "final_warn_hours": 1,             # –ó–∞ —Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ –¥–æ —É–¥–∞–ª–µ–Ω–∏—è (30 –¥–µ–Ω—å)
        "send_time_hour_msk": 10,          # –í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–ú–°–ö)
    },

    # –ê—Ä—Ö–∏–≤–∞—Ü–∏—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
    "archive": {
        "inactive_retention_days": 90,     # –°–∫–æ–ª—å–∫–æ –¥–Ω–µ–π —Ö—Ä–∞–Ω–∏—Ç—å –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ (3 –º–µ—Å—è—Ü–∞)
        "cleanup_batch_size": 100,         # –°–∫–æ–ª—å–∫–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞ —Ä–∞–∑
    },
}

# =============================================================================
# –ö–£–†–° STARS
# =============================================================================

STARS_CONFIG = {
    "usd_multiplier": 0.013,    # 1 Star = $0.013 (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∫—É—Ä—Å Telegram)
    "discount": 0.9,            # –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç (0.9 = —Å–∫–∏–¥–∫–∞ 10%)
    "min_rate_rub": 1.0,        # –ú–∏–Ω–∏–º—É–º 1‚ÇΩ –∑–∞ –∑–≤–µ–∑–¥—É
    "update_hour_msk": 4,       # –ß–∞—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–∞ (–ú–°–ö)
    "fallback_usd_rub": 90.0,   # –ö—É—Ä—Å USD/RUB –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –µ—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
}

# –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞ –∫—É—Ä—Å–∞ Stars:
# star_rub = USD_RUB * usd_multiplier * discount
# star_rub = max(star_rub, min_rate_rub)
#
# –ü—Ä–∏–º–µ—Ä –ø—Ä–∏ USD/RUB = 90:
# star_rub = 90 * 0.013 * 0.9 = 1.053 ‚ÇΩ

# =============================================================================
# –ü–†–û–ú–û–ö–û–î–´
# =============================================================================

PROMO_TYPES = {
    "fixed_rub": {
        "name": "–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞",
        "description": "–°–∫–∏–¥–∫–∞ –Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—É–º–º—É –≤ —Ä—É–±–ª—è—Ö",
    },
    "percent": {
        "name": "–ü—Ä–æ—Ü–µ–Ω—Ç —Å–∫–∏–¥–∫–∏",
        "description": "–°–∫–∏–¥–∫–∞ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö –æ—Ç —Å—É–º–º—ã",
    },
    "bonus_rub": {
        "name": "–ë–æ–Ω—É—Å –≤ —Ä—É–±–ª—è—Ö",
        "description": "–ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–∞ –Ω–∞ –±–∞–ª–∞–Ω—Å –≤ —Ä—É–±–ª—è—Ö",
    },
    "bonus_stars": {
        "name": "–ë–æ–Ω—É—Å –≤ Stars",
        "description": "–ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–∞ –Ω–∞ –±–∞–ª–∞–Ω—Å –≤ Stars",
    },
    "free_service": {
        "name": "–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è —É—Å–ª—É–≥–∞",
        "description": "–û–¥–Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è —É—Å–ª—É–≥–∞",
    },
}

# =============================================================================
# –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò
# =============================================================================

def get_service_price(service_code: str) -> Optional[float]:
    """–ü–æ–ª—É—á–∏—Ç—å —Ü–µ–Ω—É —É—Å–ª—É–≥–∏ –≤ —Ä—É–±–ª—è—Ö"""
    service = PAID_SERVICES.get(service_code)
    if service and service.get("is_active"):
        return service.get("price_rub")
    return None


def get_account_limits(account_type: str) -> Dict[str, Any]:
    """–ü–æ–ª—É—á–∏—Ç—å –ª–∏–º–∏—Ç—ã –¥–ª—è —Ç–∏–ø–∞ –∞–∫–∫–∞—É–Ω—Ç–∞"""
    account = ACCOUNT_TYPES.get(account_type, ACCOUNT_TYPES["free"])
    return account.get("limits", ACCOUNT_TYPES["free"]["limits"])


def get_active_services(category: Optional[str] = None) -> Dict[str, Dict]:
    """–ü–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —É—Å–ª—É–≥–∏, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"""
    services = {}
    for code, service in PAID_SERVICES.items():
        if not service.get("is_active"):
            continue
        if category and service.get("category") != category:
            continue
        services[code] = service
    return services


def get_subscription_price(account_type: str) -> Optional[float]:
    """–ü–æ–ª—É—á–∏—Ç—å —Ü–µ–Ω—É –ø–æ–¥–ø–∏—Å–∫–∏"""
    account = ACCOUNT_TYPES.get(account_type)
    if account:
        return account.get("price_rub")
    return None
